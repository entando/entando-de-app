(this["webpackJsonpentando-ootb-widgets"]=this["webpackJsonpentando-ootb-widgets"]||[]).push([[0],{114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),i=(a(65),a(5)),o=a(6),u=a(27),d=a(7),s=a(8),h=a(55),m=a(4),g=a(122),p=a(119),f=a(120),v=a(135),b=a(121),E=a(123),y=a(124),O=a(125),k=a(126),j=a(127),N=[{code:"EN",descr:"English"},{code:"IT",descr:"Italian"}],_=[{code:"homepage",title:"Home",level:"0",url:"http://localhost:8090/entando-de-app/en/homepage.page",voidPage:!0},{code:"my_page",title:"My Page",level:"1",url:"http://localhost:8090/entando-de-app/en/my_page.page",voidPage:!1},{code:"homepage_test",title:"Home - test",level:"1",url:"http://localhost:8090/entando-de-app/en/homepage_test.page",voidPage:!1},{code:"sitemap",title:"Sitemap",level:"2",url:"http://localhost:8090/entando-de-app/en/sitemap.page",voidPage:!1},{code:"homepage",title:"Home",level:"0",url:"http://localhost:8090/entando-de-app/en/homepage.page",voidPage:!0},{code:"my_page",title:"My Page",level:"0",url:"http://localhost:8090/entando-de-app/en/my_page.page",voidPage:!1},{code:"homepage_test",title:"Home - test",level:"1",url:"http://localhost:8090/entando-de-app/en/homepage_test.page",voidPage:!0},{code:"sitemap",title:"Sitemap",level:"2",url:"http://localhost:8090/entando-de-app/en/sitemap.page",voidPage:!1},{code:"my_pagesdfdf",title:"My Page Wa",level:"2",url:"http://localhost:8090/entando-de-app/en/my_page.page",voidPage:!1},{code:"gbadoasd",title:"Forever",level:"3",url:"http://localhost:8090/entando-de-app/en/my_page.page",voidPage:!1},{code:"contact",title:"Contact",level:"2",url:"http://localhost:8090/entando-de-app/en/contact.page",voidPage:!1},{code:"address",title:"Address",level:"3",url:"http://localhost:8090/entando-de-app/en/address.page",voidPage:!1},{code:"about",title:"About",level:"1",url:"http://localhost:8090/entando-de-app/en/homepage.page",voidPage:!0},{code:"homepage",title:"Home",level:"0",url:"http://localhost:8090/entando-de-app/en/homepage.page",voidPage:!0}],C=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={expanded:!1},n.handleExpandSidePanel=n.handleExpandSidePanel.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"handleExpandSidePanel",value:function(){this.setState((function(e){return{expanded:!e.expanded}}))}},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(p.a,{"aria-label":"Entando OOTB Widgets Dev"},r.a.createElement(f.a,{href:"#",prefix:"Entando"},"OOTB Widgets Dev"),r.a.createElement(v.a,null,r.a.createElement(b.a,{"aria-label":"Components List",onClick:this.handleExpandSidePanel},r.a.createElement(g.a,null))),r.a.createElement(E.a,{"aria-label":"Header Panel",expanded:this.state.expanded},r.a.createElement(y.a,{"aria-label":"Switcher Container"},r.a.createElement(O.a,{"aria-label":"Language Chooser",href:"/"},"Language Chooser"),r.a.createElement(O.a,{href:"/nav-bar","aria-label":"Navigation Bar"},"Navigation Bar"),r.a.createElement(O.a,{href:"/login-button","aria-label":"Login Button"},"Login Button"),r.a.createElement(O.a,{href:"/search-bar","aria-label":"Search Bar"},"Search Bar"),r.a.createElement(O.a,{href:"/header-fragment","aria-label":"Header Fragment"},"Header Fragment"),r.a.createElement(k.a,null)))),r.a.createElement(j.a,null,r.a.createElement(m.a,{path:"/",exact:!0,render:function(){return r.a.createElement("choose-language-widget",{"current-lang":"EN",languages:JSON.stringify(N)})}}),r.a.createElement(m.a,{path:"/login-button",exact:!0,render:function(){return r.a.createElement("div",{style:{paddingLeft:"100px"}},r.a.createElement("login-button-widget",{"admin-url":"http://localhost:3000/","redirect-url":"".concat("http://localhost:3000/","login-button")}))}}),r.a.createElement(m.a,{path:"/nav-bar",exact:!0,render:function(){return r.a.createElement(p.a,{"aria-label":"Entando Navigation Bar"},r.a.createElement("navigation-bar-widget",{"current-page":"homepage","nav-items":JSON.stringify(_)}))}}),r.a.createElement(m.a,{path:"/search-bar",exact:!0,render:function(){return r.a.createElement("search-bar-widget",{"action-url":"http://localhost:3000/",placeholder:"Search"})}}),r.a.createElement(m.a,{path:"/header-fragment",exact:!0,render:function(){return r.a.createElement("header-fragment",{"app-url":"http://localhost:3000/"},r.a.createElement("template",null,r.a.createElement("navigation-bar-widget",{"current-page":"homepage","nav-items":JSON.stringify(_)}),r.a.createElement("choose-language-widget",{"current-lang":"EN",languages:JSON.stringify(N)}),r.a.createElement("login-button-widget",{"app-url":"http://localhost:3000/",page:"".concat("http://localhost:3000/","en/homepage_test.page")})))}})))}}]),a}(n.Component),w=a(17),P=a(24),L=a(134),A=a(136),x=a(128),S=a(129),T=(a(70),function(e){var t=e.languages,a=e.currentLang,n=e.menuLeanRight;return r.a.createElement(L.a,{renderIcon:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null),r.a.createElement(S.b,{className:"chooseLanguage__menu-arrow"}))},flipped:n,className:"chooseLanguage"},t.map((function(e){return r.a.createElement(A.a,{key:e.code,itemText:e.descr,href:e.url,className:["langItem"].concat(Object(P.a)(a===e.code?["active"]:[])).join(" ")})})))});T.defaultProps={languages:[],currentLang:"",menuLeanRight:!1};var M=T,U={languages:"languages",currentLang:"current-lang"},R=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(!Object.values(U).includes(e))throw new Error("Untracked changed attribute: ".concat(e));this.mountPoint&&a!==t&&this.render()}},{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint),setTimeout((function(){return e.render()}),500)}},{key:"render",value:function(){var e=JSON.parse(this.getAttribute(U.languages)),t=this.getAttribute(U.currentLang),a=this.offsetLeft>document.body.clientWidth/2;c.a.render(r.a.createElement(M,{languages:e,currentLang:t,menuLeanRight:a}),this.mountPoint)}}],[{key:"observedAttributes",get:function(){return Object.values(U)}}]),a}(Object(w.a)(HTMLElement));customElements.get("choose-language-widget")||customElements.define("choose-language-widget",R);var B=a(12),I=a(58),H=a.n(I),D=a(130),W=a(131),q=a(132),J=a(20),F=a(3),K=a.n(F),G=function(e,t){for(var a=0;a<t.length;a++)if(z(e,t[a]))return!0;return!1},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.key,n=t.which,r=t.keyCode;return"string"===typeof e?e===a:"number"===typeof e?e===n||e===r:e.key&&Array.isArray(a)?-1!==a.indexOf(e.key):e.key===a||e.which===n||e.keyCode===r},V={key:"Enter",which:13,keyCode:13},Q={key:["Escape","Esc"],which:27,keyCode:27},X={key:" ",which:32,keyCode:32},Y=a(2),Z=a.n(Y),$=a(41),ee=(function(e){var t=Object.keys(e);t.reduce((function(t,a){return Object(B.a)(Object(B.a)({},t),{},Object($.a)({},a,(n=e[a],function(e,t,a){for(var r=arguments.length,l=new Array(r>3?r-3:0),c=3;c<r;c++)l[c-3]=arguments[c];return n.apply(void 0,[e,t,a].concat(l))})));var n}),{})}({"aria-label":Z.a.string,"aria-labelledby":Z.a.string}),J.a.prefix),te=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._subMenus=r.a.createRef(),n.handleOnIconClick=function(e){e.stopPropagation(),e.preventDefault(),n.setState((function(e){return{expanded:!e.expanded}}))},n.handleOnClick=function(e){if("#"===n.props.href){var t=n._subMenus.current;t&&t.contains(e.target)||e.preventDefault(),n.setState((function(e){return{expanded:!e.expanded}}))}},n.handleOnKeyDown=function(e){if(G(e,[V,X]))return e.stopPropagation(),e.preventDefault(),void n.setState((function(e){return{expanded:!e.expanded}}))},n.handleOnBlur=function(e){if(null!==e.relatedTarget){var t=e.relatedTarget.closest("li.".concat(ee,"--header__submenu")),a=e.currentTarget;if(t&&(a.dataset.uniqueId===t.dataset.uniqueId||a.querySelector("li[data-unique-id='".concat(t.dataset.uniqueId,"']"))))return void e.stopPropagation()}var r=n.items.find((function(t){return t===e.relatedTarget}));e.relatedTarget&&(e.relatedTarget.getAttribute("href")&&"#"!==e.relatedTarget.getAttribute("href")||r)||n.setState({expanded:!1,selectedIndex:null})},n.handleMenuButtonRef=function(e){n.props.focusRef&&n.props.focusRef(e),n.menuButtonRef=e},n.handleItemRef=function(e){return function(t){n.items[e]=t}},n.handleMenuClose=function(e){if(G(e,[Q])&&n.state.expanded)return e.stopPropagation(),e.preventDefault(),n.setState((function(){return{expanded:!1,selectedIndex:null}})),void n.menuButtonRef.focus()},n._renderMenuItem=function(e,t){if(r.a.isValidElement(e))return r.a.cloneElement(e,{ref:n.handleItemRef(t)})},n.state={expanded:!1,selectedIndex:null},n.items=[],n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e["aria-label"],a=e["aria-labelledby"],n=e.className,l=e.children,c=e.renderMenuContent,i=e.menuLinkName,o=e.href,u=e.uniqueId,d={"aria-label":t,"aria-labelledby":a},s=K()("".concat(ee,"--header__submenu"),n);return r.a.createElement("li",{className:s,onKeyDown:this.handleMenuClose,onClick:this.handleOnClick,tabIndex:0,"data-unique-id":u,onBlur:this.handleOnBlur},r.a.createElement("a",Object.assign({className:"".concat(ee,"--header__menu-item ").concat(ee,"--header__menu-title"),href:o,"aria-expanded":this.state.expanded},d),i,r.a.createElement("button",{"aria-haspopup":"menu",onClick:this.handleOnIconClick,onKeyDown:this.handleOnKeyDown,ref:this.handleMenuButtonRef},r.a.createElement(c,null))),r.a.createElement("ul",Object.assign({},d,{ref:this._subMenus,className:"".concat(ee,"--header__menu")}),r.a.Children.map(l,this._renderMenuItem)))}}]),a}(n.Component);te.defaultProps={renderMenuContent:function(){return r.a.createElement(S.a,{className:"".concat(ee,"--header__menu-arrow")})},href:"#",uniqueId:""};var ae=r.a.forwardRef((function(e,t){return r.a.createElement(te,Object.assign({},e,{focusRef:t}))}));ae.displayName="HeaderMenu";var ne=ae,re=(a(114),J.a.prefix),le=function(){var e=window.entando||{},t=!!e.keycloak;return t?Object(B.a)(Object(B.a)({},e.keycloak),{},{initialized:t}):{initialized:t}},ce=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={username:null},n.keycloakEventHandler=n.keycloakEventHandler.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"keycloakEventHandler",value:function(e){var t=e.detail.eventType,a=le();switch(t){case"onAuthSuccess":case"onAuthRefreshSuccess":var n=H()(a,"idTokenParsed.preferred_username");this.updateUsername(n);break;case"onAuthRefreshError":this.resetUsername(),a.logout();break;case"onAuthLogout":this.resetUsername()}}},{key:"componentDidMount",value:function(){window.addEventListener("keycloak",this.keycloakEventHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keycloak",this.keycloakEventHandler)}},{key:"updateUsername",value:function(e){this.setState({username:e})}},{key:"resetUsername",value:function(){this.setState({username:null})}},{key:"render",value:function(){var e=this.props,t=e.adminUrl,a=e.userDisplayName,n=e.redirectUrl,l=le(),c=a||this.state.username;return r.a.createElement("div",{className:"LoginButtonWidget"},l.authenticated?r.a.createElement("div",{className:"LoginButtonWidget__welcome"},r.a.createElement(D.a,{"aria-label":"My Account"},r.a.createElement(ne,{"aria-label":c,menuLinkName:c,renderMenuContent:function(){return r.a.createElement(S.a,{className:"".concat(re,"--header__menu-arrow")})},className:"navigationMenu"},r.a.createElement(W.a,{href:t},"Dashboard"),r.a.createElement(W.a,{onClick:function(){return le().logout({redirectUri:n})}},r.a.createElement(q.b,{className:"LoginButtonWidget__logoutsvg"})," Logout")))):r.a.createElement(q.a,{onClick:function(){return le().login({redirectUri:n})},className:"LoginButtonWidget__loginsvg"}))}}]),a}(n.Component),ie={userDisplayName:"user-display-name",redirectUrl:"redirect-url",adminUrl:"admin-url"},oe=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"attributeChangedCallback",value:function(e,t,n){if(!a.observedAttributes.includes(e))throw new Error("Untracked changed attribute: ".concat(e));this.mountPoint&&n!==t&&this.render()}},{key:"connectedCallback",value:function(){this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint),this.render()}},{key:"render",value:function(){var e=this.getAttribute(ie.userDisplayName),t=this.getAttribute(ie.redirectUrl),a=this.getAttribute(ie.adminUrl);c.a.render(r.a.createElement(ce,{userDisplayName:e,redirectUrl:t,adminUrl:a}),this.mountPoint)}}],[{key:"observedAttributes",get:function(){return Object.values(ie)}}]),a}(Object(w.a)(HTMLElement));oe.TAG="login-button-widget",customElements.get(oe.TAG)||customElements.define(oe.TAG,oe);var ue=a(59),de=(a(115),J.a.prefix),se=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).currentPageMarked=!1,e}return Object(o.a)(a,[{key:"renderNav",value:function(e,t,a){var n=this;if(null==e||0===e.length)return r.a.createElement(ne,{className:"navigationMenu"});var l=this.props.currentPage,c=0===Number(e[0].level),i=1===Number(e[0].level),o=c?D.a:ne,u=e.find((function(e){return e.code===l||e.children&&e.children.find((function(e){return e.code===l}))})),d="{}";if(t){t.children;var s=Object(ue.a)(t,["children"]);d=JSON.stringify(s)}var h,m=Object(B.a)(Object(B.a)(Object(B.a)({"aria-label":c?"Menu":t.title},c?{className:"navigationMenu"}:{menuLinkName:t.title,renderMenuContent:(h=i,function(){var e=h?S.a:S.c;return r.a.createElement(e,{className:"".concat(de,"--header__menu-arrow")})}),uniqueId:d,key:d}),a?{isCurrentPage:a}:{}),t&&t.url&&!t.voidPage?{href:t.url}:{href:"#"});return r.a.createElement(o,m,e.map((function(e){var t=!n.currentPageMarked&&u&&u.code===e.code;return t&&(n.currentPageMarked=!0),e.children?n.renderNav(e.children,e,t):r.a.createElement(W.a,{key:JSON.stringify(e),href:e.url,isCurrentPage:t},e.title)})))}},{key:"render",value:function(){var e=this.props.navItems;return this.currentPageMarked=!1,this.renderNav(e)}}]),a}(n.Component),he={navItems:"nav-items",currentPage:"current-page"},me=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(!Object.values(he).includes(e))throw new Error("Untracked changed attribute: ".concat(e));this.mountPoint&&a!==t&&this.render()}},{key:"connectedCallback",value:function(){this.render()}},{key:"condenseNavItems",value:function(e){var t=JSON.parse(e).map((function(e,t){return Object(B.a)(Object(B.a)({},e),{},{navIdx:t})})),a=[],n=[];return t.forEach((function(e,r){if(Number(e.level)!==a.length)for(;Number(e.level)!==a.length;)e.level>a.length?a.push(t[r-1]):a.pop();var l=a.length;l>0?(a[l-1].children||(a[l-1].children=[]),a[l-1].children=[].concat(Object(P.a)(a[l-1].children),[e])):n.push(e)})),n}},{key:"render",value:function(){var e=this.condenseNavItems(this.getAttribute(he.navItems)),t=this.getAttribute(he.currentPage);c.a.render(r.a.createElement(se,{navItems:e,currentPage:t}),this)}}],[{key:"observedAttributes",get:function(){return Object.values(he)}}]),a}(Object(w.a)(HTMLElement));customElements.get("navigation-bar-widget")||customElements.define("navigation-bar-widget",me);var ge=a(33),pe=a(133),fe=(a(116),function(e){var t=e.actionUrl,a=e.placeholder,l=Object(n.useState)(!1),c=Object(ge.a)(l,2),i=c[0],o=c[1],u=K()("SearchBar",i?"opened":"");return r.a.createElement("form",{action:t,className:u},i?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",name:"search",placeholder:a}),r.a.createElement("button",{type:"submit"},r.a.createElement(pe.a,null))):r.a.createElement(pe.a,{className:"SearchBar__svg",onClick:function(){return o(!0)}}))}),ve={actionUrl:"action-url",placeholder:"placeholder"},be=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(!Object.values(ve).includes(e))throw new Error("Untracked changed attribute: ".concat(e));a!==t&&this.render()}},{key:"connectedCallback",value:function(){this.render()}},{key:"render",value:function(){var e=this.getAttribute(ve.actionUrl),t=this.getAttribute(ve.placeholder);c.a.render(r.a.createElement(fe,{actionUrl:e,placeholder:t}),this)}}],[{key:"observedAttributes",get:function(){return Object.values(ve)}}]),a}(Object(w.a)(HTMLElement));customElements.get("search-bar-widget")||customElements.define("search-bar-widget",be);a(117);var Ee=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleLogoAreaRef=function(t){var a=e.props.childNodes.filter((function(e){return"logo"===e.getAttribute("role")})),n=Object(ge.a)(a,1)[0];if(n){var r=n.cloneNode(!0);r.classList.add("HeaderFragment__logo"),t.appendChild(r)}},e.handleMenuAreaRef=function(t){var a=e.props.childNodes.filter((function(e){return"navigation-bar-widget"===e.tagName.toLowerCase()})),n=Object(ge.a)(a,1)[0];n&&t.appendChild(n.cloneNode(!0))},e.handleActionsRef=function(t){e.props.childNodes.filter((function(e){var t=e.tagName.toLowerCase();return"navigation-bar-widget"!==t&&"script"!==t&&"link"!==t&&"logo"!==e.getAttribute("role")||"login-button-widget"===t||"choose-language-widget"===t})).forEach((function(e){var a=e.cloneNode(!0);a.classList.contains("navbar-search")&&a.classList.add("Homepage__search"),t.appendChild(a)}))},e}return Object(o.a)(a,[{key:"render",value:function(){this.props.applicationBaseURL;return r.a.createElement(p.a,{"aria-label":"Entando",className:"HeaderFragment"},r.a.createElement("a",{ref:this.handleLogoAreaRef}),r.a.createElement("div",{ref:this.handleMenuAreaRef,className:"HeaderFragment__menu-area"}),r.a.createElement("div",{ref:this.handleActionsRef,className:"bx--header__global HeaderFragment__actions-area"}))}}]),a}(n.Component);Ee.defaultProps={applicationBaseURL:"http://localhost:3000/"};var ye=Ee,Oe={applicationBaseURL:"app-url"},ke=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).observer=null,e.childs=[],e}return Object(o.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(!Object.values(Oe).includes(e))throw new Error("Untracked changed attribute: ".concat(e));a!==t&&this.childs.length&&this.extractTemplateTag()}},{key:"extractTemplateTag",value:function(e){var t=e||this.getElementsByTagName("template")[0];if(t){var a=t.content&&t.content.children;a.length?this.childs=Object(P.a)(a):this.childs=Object(P.a)(t.childNodes),this.render()}}},{key:"activateObserve",value:function(){var e=this,t=this.querySelector("template");t?this.extractTemplateTag(t):(this.observer=new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.length,t.addedNodes.length&&t.addedNodes[0].tagName&&"template"===t.addedNodes[0].tagName.toLowerCase()&&setTimeout((function(){return e.extractTemplateTag(t.addedNodes[0])}),500)}))})),this.observer.observe(this,{childList:!0}))}},{key:"connectedCallback",value:function(){this.activateObserve()}},{key:"render",value:function(){var e=this.getAttribute(Oe.applicationBaseURL);c.a.render(r.a.createElement(ye,{applicationBaseURL:e,childNodes:this.childs}),this)}}],[{key:"observedAttributes",get:function(){return Object.values(Oe)}}]),a}(Object(w.a)(HTMLElement));customElements.get("header-fragment")||customElements.define("header-fragment",ke);"true"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BASEURL:"http://localhost:3000/"}).REACT_APP_LOCAL&&c.a.render(r.a.createElement(C,null),document.getElementById("root"))},60:function(e,t,a){e.exports=a(118)},65:function(e,t,a){},70:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.d89b4d81.chunk.js.map